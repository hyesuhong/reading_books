# 요약

## 도시를 세운다면?
- 도시가 잘 운영되는 이유
	- 각 분야를 관리하는 팀이 있어 큰 그림을 그리는 사람, 작은 사항에 집중하는 사람이 공존
	- 적절한 추상화와 모듈화
- 소프트웨어 팀 ≒ 도시

## 시스템 제작과 시스템 사용을 분리하라
> [!note]
> 소프트웨어 시스템은 (애플리케이션 객체를 제작하고 의존성을 서로 '연결'하는) 준비 과정과 (준비 과정 이후에 이어지는) 런타임 로직을 분리해야 한다.
- 관심사 분리: 시작 단계도 하나의 **관심사**
### 방법
- Main 분리
	- 생성과 관련된 코드: main 혹은 main이 호출하는 모듈로
	- 나머지 시스템: 모든 객체가 생성되었고, 모든 의존성이 연결되었다고 가정함
	- main에서 애플리케이션으로 의존성 화살표가 향함 ⇒ 애플리케이션은 main, 객체가 생성되는 과정을 모름
- 팩토리
	- 객체가 생성되는 시점을 애플리케이션이 정할 때, **Abstract Factory 패턴**을 사용
	- 모든 의존성이 main에서 애플리케이션을 향함
- 의존성 주입
	- 제어 역전 기법을 의존성 관리에 적용한 메커니즘
	- 호출하는 객체가 인스턴스를 만드는 책임을 지지 않음
	- 해당 책임을 질 main 루틴이나 특수 컨테이너 사용
	- 클래스는 수동적, 대신에 컨테이너에 setter나  생성자 인수를 제공

## 확장
- 처음부터 올바른 시스템을 만들 수 없음
	- ⇒ 조정과 확장은 필수불가결한 단계
- 시스템 수준에서 확장하기 쉬운 아키텍처란?
	- 적절한 관심사 분리
	- 횡단 관심사
		- 모든 객체가 전반적으로 동일한 방식을 이용하게 만드는 것
		- AOP: 횡단 관심사에 대처해 모듈성을 확보하는 방법론

## AOP 예시
- 자바 프록시
	- 단순한 상황에 적합
	- 개별 객체/클래스에서 메서드 호출을 감싸는 경우
	- 코드가 많아질 수 있으며, 복잡해보임
	- 실행 지점을 명시하는 메커니즘 제공하지 않음
- 순수 자바 AOP 프레임워크
	- 자바 AOP 프레임워크는 프록시를 사용하며, 대부분의 프록시 코드는 도구로 자동화 가능
	- POJO(Plain Old Java Object): 도메인에 초점
		- 테스트가 더 쉽고 간단
		- 사용자가 올바르게 구현하기 쉬움
		- 유지, 보수, 개선이 편함
- AspectJ 관점
	- AspectJ 언어
		- 관심사를 관점으로 분리하는 가장 강력한 도구
		- 관점을 모듈화 구성으로 지원하는 자바 언어 확장

## 테스트 주도 시스템 아키덱처 구축
- 코드 수준에서 아키텍처 관심사를 분리 가능 = 테스트 주도 아키텍처 구축 가능
- BDUF(Big Design Up Front) 추구 X
	- 변경을 수용하기 어려움
- 단순하면서도 잘 분리된 아키텍처로 프로젝트 진행 → 빠른 출시 → 구조 추가 → 점차적 확장
- 방향성을 정하면서 변화할 수 있는 환경에 대처할 유연성도 유지할 것

## 의사 결정을 최적화
- 가능한 마지막 순간까지 결정을 미루는 방법이 최선
- ⇒ 최대한 정보를 모아 최선의 결정을 내리기 위해

## 명백한 가치가 있을 때 표준을 현명하게 사용하라
- 과장된 표준에 집착하는 것보다 고객 가치를 더 생각하라

## 시스템은 도메인 특화 언어가 필요하다
- DSL(Domain-Specific Language): 간단한 스크립트 언어나 표준 언어로 구현한 API
- 장점
	- 도메인 개념과 구현 코드 사이의 의사소통 간극을 축소
	- 추상화 수준을 코드 관용구, 디자인 패턴 이상으로 끌어올림

---

# 발췌

> [!quote]
> 체계적이고 탄탄한 시스템을 만들고 싶다면 흔히 쓰는 좀스럽고 손쉬운 기법으로 모듈성을 깨서는 절대로 안 된다. 객체를 생성하거나 의존성을 연결할 때도 마찬가지다. 설정 논리는 일반 실행 논리와 분리해야 모듈성이 높아진다. 또한 주요 의존성을 해소하기 위한 방식, 즉 전반적이며 일관적인 방식도 필요하다.
> __
> 196p.

> [!quote]
> '처음부터 올바르게' 시스템을 만들 수 있다는 믿음은 미신이다. 대신에 우리는 오늘 주어진 사용자 스토리에 맞춰 시스템을 구현해야 한다. 내일은 새로운 스토리에 맞춰 시스템을 조정하고 확장하면 된다. 이것이 반복적이고 점진적인 애자일 방식의 핵심이다.
> __
> 199p.

> [!quote]
> 최선의 시스템 구조는 각기 POJO(또는 다른) 객체로 구현되는 모듈화된 관심사 영역(도메인)으로 구성된다. 이렇게 서로 다른 영역은 해당 영역 코드에 최소한의 영향을 미치는 관점이나 유사한 도구를 사용해 통합한다. 이런 구조 역시 코드와 마찬가지로 테스트 주도 기법을 적용할 수 있다.
> __
> 211p.

> [!quote]
> 표준을 사용하면 아이디어와 컴포넌트를 재사용하기 쉽고, 적절한 경험을 가진 사람을 구하기 쉬우며, 좋은 아이디어를 캡슐화하기 쉽고, 컴포넌트를 엮기 쉽다. 하지만 때로 표준을 만드는 시간이 너무 오래 걸려 업계가 기다리지 못한다. 어떤 표준은 원래 표준을 제정한 목적을 잊어버리기도 한다.
> __
> 212p.

---

# 메모

## 관심사 분리(SoC; Separation of Concerns)
- 관심사: 컴퓨터 프로그램 코드에 영향을 미치는 정보의 집합
- 구별된 부분으로 분리시키는 디자인 원칙
- 각 부분은 각자의 관심사를 해결

## 제어 역전 기법 (IoC; Inversion of Control)
- 재사용 라이브러리에 의한 흐름 제어
- 목적
	- 작업을 구현하는 방식과 작업 수행 자체를 분리한다.
	- 모듈을 제작할 때, 모듈과 외부 프로그램의 결합에 대해 고민할 필요 없이 모듈의 목적에 집중할 수 있다.
	- 다른 시스템이 어떻게 동작할지에 대해 고민할 필요 없이, 미리 정해진 협약대로만 동작하게 하면 된다.
	- 모듈을 바꾸어도 다른 시스템에 부작용을 일으키지 않는다.

## AOP(Aspect-Oriented Programming)
- 로직을 관심사를 기준으로 분리해 모듈성을 증가하는 방법
- 각각의 관심사는 추상화를 제공해, 이를 이용한 구현, 추상화, 합성을 할 수 있게 함

## 도메인
- 특정 프로그래밍 프로그램의 목표 주제