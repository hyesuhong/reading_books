# 요약

## 창발적 설계로 깔끔한 코드를 구현하자

> [!note] 켄트 벡의 단순한 설계 규칙(중요도순)
> - 모든 테스트를 실행한다.
> - 중복을 없앤다.
> - 프로그래머의 의도를 표현한다.
> - 클래스와 메서드 수를 최소로 줄이다.

### 테스트 실행
- 모든 테스트 케이스를 통과하는 시스템은 테스트 가능한 시스템
	- = 검증 가능한 시스템
	- ⇒ 설계 의도대로 돌아가는 시스템인지 검증
- 객체 지향 방법론의 목표(낮은 결합도와 높은 응집력)를 달성할 수 있음

### 리팩터링(켄트 벡 규칙 2~4)
- 리팩터링 중에도 테스트를 통해 시스템이 무너질 걱정을 하지 않아도 됨
- 설계 품질을 높이는 기법이라면 무엇이든 적용 OK
	- 응집도 높이기
	- 결합도 낮추기
	- 함수/클래스 크기 줄이기 등

## 모든 테스트를 실행하라
- 모든 테스트 케이스를 통과하는 시스템은 테스트 가능한 시스템
	- = 검증 가능한 시스템
	- ⇒ 설계 의도대로 돌아가는 시스템인지 검증
- 객체 지향 방법론의 목표(낮은 결합도와 높은 응집력)를 달성할 수 있음

## 중복을 없애라

> [!note] 중복?
> = 추가 작업, 추가 위험, 불필요한 복잡도
 
### 무엇이 중복인가
- 똑같은/비슷한 코드
- 구현 중복

### 어떻게 제거할 것인가
#### 메서드 이용
```ts
// BAD
type Size = () => number;
type IsEmpty = () => boolean;

const size: Size = () => {
	const isEmpty: IsEmpty = () => {}
}

// GOOD
const isEmpty = () => {
	return 0 === size();
}
```

#### 공통적인 코드를 새 메서드로 분리(=소규모 재사용)
- 가시성 높아짐
- 추상화를 더해 재사용할 기회가 생김

#### Template Method 패턴
- 고차원 중복 제거할 목적으로 자주 사용되는 기법
```ts
// BAD
class VacationPolicy {
	accrueUSDivisionVacation() {
		// 지금까지 근무한 시간을 바탕으로 휴가 일수를 계산하는 코드
		// ...
		// 휴가 일수가 미국 최소 법정 일수를 만족하는지 확인하는 코드
		// ...
		// 휴가 일수를 급여 대장에 적용하는 코드
		// ...
	}

	accrueEUDivisionVacation() {
		// 지금까지 근무한 시간을 바탕으로 휴가 일수를 계산하는 코드
		// ...
		// 휴가 일수가 유럽 연합 최소 법정 일수를 만족하는지 확인하는 코드
		// ...
		// 휴가 일수를 급여 대장에 적용하는 코드
		// ...
	}
}

// GOOD
class VacationPolicy {
	accrueVacation() {
		calculateBaseVacationHours();
		alterForLegalMinimums();
		applyToPayroll();
	}

	private calculateBaseVacationHours() {}
	protected alterForLegalMinimums() {}
	private applyToPayroll() {}
}

class USVacationPolicy extends VacationPolicy {
	protected alterForLegalMinimums() {}
}

class EUVacationPolicy extends VacationPolicy {
	protected alterForLegalMinimums() {}
}
```

## 프로그램의 의도를 표현하라
- 나중에 유지보수할 사람(미래의 자신 포함)이 편재 코드를 짜는 사람보다 깊이 있게 문제를 이해할 가능성은  희박
	- ⇒ 명백하게 코드를 작성해야 오해의 여지를 줄일 수 있음
- 어떻게 표현할 것인가
	1. 좋은 이름
	2. 함수/클래스의 크기를 가능한 한 줄이기
	3. 표준 명칭 사용
		- 디자인 패턴을 사용했다면 해당 패턴의 이름 포함 ⇒ 설계 의도 이해 가능성 ↑
	4. 단위 테스트 케이스 꼼꼼하게 작성
		- 단위 테스트 케이스 = 예제
		- 테스트 기능뿐만 아니라 기능을 이해시킬 수 있음

## 클래스와 메서드 수를 최소로 줄여라
- 극단적으로 줄이는 것이 아닌, 가능한 줄일 것
- 극단적으로 줄이면, 클래스와 메서드 수가 늘어남 → 시스템의 크기 증가
- 목표는 함수와 클래스 크기를 작게 유지하면서 시스템 크기도 작게 유지하는 것

---

# 발췌

> [!quote]
> 표현력을 높이는 가장 중요한 방법은 노력이다.
> ...
> 자신의 작품을 조금 더 자랑하자. 함수와 클래스에 조금 더 시간을 투자하자. 더 나은 이름을 선택하고, 큰 함수를 작은 함수 여럿으로 나누고, 자신의 작품에 조금만 더 주의를 기울이자. 주의는 대단한 재능이다.
> __
> 221 ~ 222p.

---

# 메모

## 창발성
- 남이 모르거나 하지 아니한 것을 처음으로 또는 새롭게 밝혀내거나 이루어 내는 성질